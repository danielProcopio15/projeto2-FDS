{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Página Inicial</title>
    <link rel="stylesheet" href="{% static 'core/css/home.css' %}">
</head>
<body>
    <header class="site-header">
        <div class="logo-container">
            <img src="{% static 'core/css/images/jc-logo.png' %}" alt="Logo" class="site-logo">
        </div>
        <nav class="site-nav">
            <ul>
                <li><a href="{% url 'login' %}">Login</a></li>
                <li><a href="{% url 'cadastro' %}">Cadastro</a></li>
                
                <li><a href="#">Esportes</a></li>
                <li><a href="#">Cultura</a></li>
            </ul>
        </nav>
    </header>

    <main class="content-wrapper">
        
        {% if user.is_authenticated %}
        <section class="user-greeting">
            <p>
                Bem-vindo(a), {{ user.username }} | 
                
                <form action="{% url 'logout' %}" method="POST" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" style="background: none; border: none; color: inherit; padding: 0; cursor: pointer;">
                        Sair
                    </button>
                </form>
            </p>
        </section>
        {% endif %}

        {% if messages %}
        <section class="django-messages">
            <ul class="messages">
                {% for message in messages %}
                <li class="{{ message.tags }}">{{ message }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}
        
        <section class="highlights">
            
            {% with em_alta=categorias_ordenadas|first outros=categorias_ordenadas|slice:"1:" %}
            
            <div class="card destaque">
                
                {% if em_alta and em_alta.key %}
                    <a href="{% url em_alta.key|lower %}"> 
                        <div class="card-content">
                            <img src="{% static 'caminho/para/sua/imagem.png' %}" alt="Ícone {{ em_alta.nome }}" class="card-image">

                            <div class="card-overlay">
                                {% if user.is_authenticated %}
                                    <span class="tag">🔥 Em Alta</span>
                                    <h2 class="short-text">{{ em_alta.nome }}</h2>
                                    
                                    <div class="details-text">
                                        <h3>{{ em_alta.nome }}</h3>
                                        <p>Clique aqui para acessar as principais manchetes e tendências de {{ em_alta.nome }}.</p>
                                        <p class="cliques-count">Baseado em seus {{ em_alta.cliques }} cliques.</p>
                                    </div>
                                {% else %}
                                    <span class="tag">Em Alta</span>
                                    <h2 class="short-text">Faça Login para Personalizar</h2>
                                    <div class="details-text">
                                        <p>Explore as notícias gerais e registre seus interesses para ver o seu conteúdo personalizado!</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                
                {% else %}
                    <div class="card-content">
                        <span class="tag">Erro</span>
                        <a href="{% url 'home' %}">
                            <h2>Erro ao carregar categorias. Tente novamente.</h2>
                        </a>
                    </div>
                {% endif %}
            </div>

            <div class="card-row">
                
                {% for categoria in outros %}
                
                {% if categoria and categoria.key %}
                <div class="card card-{{ categoria.key|lower }}">
                    <a href="{% url categoria.key|lower %}"> 
                        <div class="card-content">
                            <img src="" alt="Ícone {{ categoria.nome }}" class="card-image">
                            
                            <div class="card-overlay">
                                <span class="tag">Explorar</span> 
                                <h2 class="short-text">{{ categoria.nome }}</h2>
                                
                                <div class="details-text">
                                    <h3>{{ categoria.nome }}</h3>
                                    <p>Clique para ver as últimas novidades de {{ categoria.nome }}.</p>
                                    {% if user.is_authenticated %}
                                        <p class="cliques-count">({{ categoria.cliques }} cliques)</p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                {% endif %}
                
                {% endfor %}
                
            </div>
            
            {% endwith %}

        </section>


        <section class="ads">
            <p>PROPAGANDA</p>
        </section>
    </main>

    <footer class="site-footer">
        <p>&copy; 2024 novo_comm. Todos os direitos reservados.</p>
    </footer>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</body>
</html>